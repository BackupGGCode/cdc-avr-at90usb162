<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ATMEL: nRF_API.c File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.1-p1 -->
<div class="tabs">
  <ul>
    <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="modules.html"><span>Modules</span></a></li>
    <li><a href="classes.html"><span>Data&nbsp;Structures</span></a></li>
    <li id="current"><a href="files.html"><span>Files</span></a></li>
    <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    <li><a href="globals.html"><span>Globals</span></a></li>
  </ul></div>
<h1>nRF_API.c File Reference</h1>This file manages the NRF24L01 RF device and provide low level driver access (based on SPI driver). <a href="#_details">More...</a>
<p>
<code>#include &quot;<a class="el" href="a00093.html">config.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00105.html">nRF_API.h</a>&quot;</code><br>
<code>#include &quot;<a class="el" href="a00113.html">lib_mcu/spi/spi_lib.h</a>&quot;</code><br>

<p>
Include dependency graph for nRF_API.c:<p><center><img src="a00154.png" border="0" usemap="#nRF_API.c_map" alt=""></center>
<map name="nRF_API.c_map">
<area href="a00024.html" shape="rect" coords="526,56,595,83" alt="">
<area href="a00036.html" shape="rect" coords="360,56,448,83" alt="">
<area href="a00044.html" shape="rect" coords="142,107,283,134" alt="">
<area href="a00021.html" shape="rect" coords="726,6,859,32" alt="">
<area href="a00022.html" shape="rect" coords="716,56,868,83" alt="">
<area href="a00016.html" shape="rect" coords="644,107,940,134" alt="">
<area href="a00042.html" shape="rect" coords="331,107,478,134" alt="">
</map>

<p>
<a href="a00104.html">Go to the source code of this file.</a><table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#ec197f260d62f70285ef5c14a874aca1">NRF_Read</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> reg)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NRF_ReadRead one byte from nRF24L01 register, 'reg'.  <a href="#ec197f260d62f70285ef5c14a874aca1"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#500e0a5e1a6dcabed1eb20f1c51cd6d3">NRF_RW_Reg</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> reg, <a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NRF_RW_RegWrites value 'value' to register 'reg'.  <a href="#500e0a5e1a6dcabed1eb20f1c51cd6d3"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#9856ea5a03c048d29e4670d94a87f51f">NRF_write_buf</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> reg, <a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> *pBuf, <a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> bytes)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NRF_write_bufWrites contents of buffer '*pBuf' to nRF24L01, typically used to write TX payload, Rx/Tx address.  <a href="#9856ea5a03c048d29e4670d94a87f51f"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00035.html#82238ef5299abf89313c36ac94c7ee89">NRF_read_buf</a> (<a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> reg, <a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> *pBuf, <a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> bytes)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">NRF_read_bufReads 'bytes' of bytes from register 'reg', typically used to read RX payload, Rx/Tx address.  <a href="#82238ef5299abf89313c36ac94c7ee89"></a><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
This file manages the NRF24L01 RF device and provide low level driver access (based on SPI driver). 
<p>
Original author: Runar Kjellhaug from Nordic RefDesign with Dallas MCU<p>
<ul>
<li>Compiler: IAR EWAVR and GNU GCC for AVR</li><li>Supported devices: AT90USB162, AT90USB82</li></ul>
<p>
<dl class="author" compact><dt><b>Author:</b></dt><dd>Atmel Corporation: <a href="http://www.atmel.com">http://www.atmel.com</a> <br>
 Support and FAQ: <a href="http://support.atmel.no/">http://support.atmel.no/</a> </dd></dl>

<p>
Definition in file <a class="el" href="a00104.html">nRF_API.c</a>.<hr><h2>Function Documentation</h2>
<a class="anchor" name="ec197f260d62f70285ef5c14a874aca1"></a><!-- doxytag: member="nRF_API.c::NRF_Read" ref="ec197f260d62f70285ef5c14a874aca1" args="(U8 reg)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> NRF_Read           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>reg</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
NRF_ReadRead one byte from nRF24L01 register, 'reg'. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>reg,register</em>&nbsp;</td><td>to read</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>reg_val, register value </dd></dl>

<p>
Definition at line <a class="el" href="a00104.html#l00057">57</a> of file <a class="el" href="a00104.html">nRF_API.c</a>.
<p>
References <a class="el" href="a00105.html#l00077">NRF_select</a>, <a class="el" href="a00105.html#l00078">NRF_unselect</a>, and <a class="el" href="a00112.html#l00100">spi_rw()</a>.
<p>
Referenced by <a class="el" href="a00098.html#l00061">hal_nrf_read_rx_pload()</a>.<div class="fragment"><pre class="fragment"><a name="l00058"></a>00058 {
<a name="l00059"></a>00059    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> reg_val;
<a name="l00060"></a>00060 
<a name="l00061"></a>00061    <a class="code" href="a00036.html#2f37b811776a0365246afbc8447a26cc">NRF_select</a>();
<a name="l00062"></a>00062    <a class="code" href="a00043.html#48058f0d26bed0107d1f0141b557ad8b">spi_rw</a>(reg);                                    <span class="comment">// Select register to read from..</span>
<a name="l00063"></a>00063    reg_val = <a class="code" href="a00043.html#48058f0d26bed0107d1f0141b557ad8b">spi_rw</a>(0);                            <span class="comment">// ..then read registervalue</span>
<a name="l00064"></a>00064    <a class="code" href="a00036.html#73dfa5b19148628cb50a9f76849b1e81">NRF_unselect</a>();                                 <span class="comment">// CSN high, terminate SPI communication</span>
<a name="l00065"></a>00065    <span class="keywordflow">return</span>(reg_val);                                <span class="comment">// return register value</span>
<a name="l00066"></a>00066 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="a00035_ec197f260d62f70285ef5c14a874aca1_cgraph.png" border="0" usemap="#a00035_ec197f260d62f70285ef5c14a874aca1_cgraph_map" alt=""></center>
<map name="a00035_ec197f260d62f70285ef5c14a874aca1_cgraph_map">
<area href="a00043.html#48058f0d26bed0107d1f0141b557ad8b" shape="rect" coords="146,5,204,32" alt="">
</map>

<p>
Here is the caller graph for this function:<p><center><img src="a00035_ec197f260d62f70285ef5c14a874aca1_icgraph.png" border="0" usemap="#a00035_ec197f260d62f70285ef5c14a874aca1_icgraph_map" alt=""></center>
<map name="a00035_ec197f260d62f70285ef5c14a874aca1_icgraph_map">
<area href="a00030.html#299546e4031cda42178a2f41c49bbb00" shape="rect" coords="144,5,299,32" alt="">
<area href="a00067.html#ga01c21a346962faaf73e29722f8dd8bf" shape="rect" coords="347,5,467,32" alt="">
<area href="a00019.html#cca4b6216b3be1e1db321a93436d004d" shape="rect" coords="515,5,606,32" alt="">
</map>

</div>
</div><p>
<a class="anchor" name="500e0a5e1a6dcabed1eb20f1c51cd6d3"></a><!-- doxytag: member="nRF_API.c::NRF_RW_Reg" ref="500e0a5e1a6dcabed1eb20f1c51cd6d3" args="(U8 reg, U8 value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> NRF_RW_Reg           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>value</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
NRF_RW_RegWrites value 'value' to register 'reg'. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>'reg'</em>&nbsp;</td><td>register to write value 'value' to</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>status byte </dd></dl>

<p>
Definition at line <a class="el" href="a00104.html#l00078">78</a> of file <a class="el" href="a00104.html">nRF_API.c</a>.
<p>
References <a class="el" href="a00105.html#l00077">NRF_select</a>, <a class="el" href="a00105.html#l00078">NRF_unselect</a>, and <a class="el" href="a00112.html#l00100">spi_rw()</a>.
<p>
Referenced by <a class="el" href="a00098.html#l00061">hal_nrf_read_rx_pload()</a>.<div class="fragment"><pre class="fragment"><a name="l00079"></a>00079 {
<a name="l00080"></a>00080    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> status;
<a name="l00081"></a>00081 
<a name="l00082"></a>00082    <a class="code" href="a00036.html#2f37b811776a0365246afbc8447a26cc">NRF_select</a>();           <span class="comment">// CSN low, init SPI transaction</span>
<a name="l00083"></a>00083    status = <a class="code" href="a00043.html#48058f0d26bed0107d1f0141b557ad8b">spi_rw</a>(reg);   <span class="comment">// select register</span>
<a name="l00084"></a>00084    <a class="code" href="a00043.html#48058f0d26bed0107d1f0141b557ad8b">spi_rw</a>(value);          <span class="comment">// ..and write value to it..</span>
<a name="l00085"></a>00085    <a class="code" href="a00036.html#73dfa5b19148628cb50a9f76849b1e81">NRF_unselect</a>();         <span class="comment">// CSN high again</span>
<a name="l00086"></a>00086    <span class="keywordflow">return</span>(status);         <span class="comment">// return nRF24L01 status byte</span>
<a name="l00087"></a>00087 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="a00035_500e0a5e1a6dcabed1eb20f1c51cd6d3_cgraph.png" border="0" usemap="#a00035_500e0a5e1a6dcabed1eb20f1c51cd6d3_cgraph_map" alt=""></center>
<map name="a00035_500e0a5e1a6dcabed1eb20f1c51cd6d3_cgraph_map">
<area href="a00043.html#48058f0d26bed0107d1f0141b557ad8b" shape="rect" coords="167,5,225,32" alt="">
</map>

<p>
Here is the caller graph for this function:<p><center><img src="a00035_500e0a5e1a6dcabed1eb20f1c51cd6d3_icgraph.png" border="0" usemap="#a00035_500e0a5e1a6dcabed1eb20f1c51cd6d3_icgraph_map" alt=""></center>
<map name="a00035_500e0a5e1a6dcabed1eb20f1c51cd6d3_icgraph_map">
<area href="a00030.html#299546e4031cda42178a2f41c49bbb00" shape="rect" coords="165,5,320,32" alt="">
<area href="a00067.html#ga01c21a346962faaf73e29722f8dd8bf" shape="rect" coords="368,5,488,32" alt="">
<area href="a00019.html#cca4b6216b3be1e1db321a93436d004d" shape="rect" coords="536,5,627,32" alt="">
</map>

</div>
</div><p>
<a class="anchor" name="9856ea5a03c048d29e4670d94a87f51f"></a><!-- doxytag: member="nRF_API.c::NRF_write_buf" ref="9856ea5a03c048d29e4670d94a87f51f" args="(U8 reg, U8 *pBuf, U8 bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> NRF_write_buf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> *&nbsp;</td>
          <td class="paramname"> <em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
NRF_write_bufWrites contents of buffer '*pBuf' to nRF24L01, typically used to write TX payload, Rx/Tx address. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>'register</em>&nbsp;</td><td>'reg' to write, </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>'*pBuf*' contains data to be written </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bytes,:</em>&nbsp;</td><td>number of data byte to write</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>nRF24L01 status byte </dd></dl>

<p>
FIXE ME !!!!!! 10µs CE pulse required 
<p>
Definition at line <a class="el" href="a00104.html#l00101">101</a> of file <a class="el" href="a00104.html">nRF_API.c</a>.
<p>
References <a class="el" href="a00093.html#l00067">FOSC</a>, <a class="el" href="a00105.html#l00079">NRF_disable</a>, <a class="el" href="a00105.html#l00080">NRF_enable</a>, <a class="el" href="a00105.html#l00077">NRF_select</a>, <a class="el" href="a00105.html#l00078">NRF_unselect</a>, <a class="el" href="a00111.html#l00112">Spi_read_data</a>, <a class="el" href="a00112.html#l00100">spi_rw()</a>, and <a class="el" href="a00111.html#l00115">Spi_send_byte</a>.
<p>
Referenced by <a class="el" href="a00098.html#l00112">hal_nrf_set_address()</a>.<div class="fragment"><pre class="fragment"><a name="l00102"></a>00102 {
<a name="l00103"></a>00103    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> status,byte_ctr;
<a name="l00104"></a>00104    <span class="keyword">volatile</span> <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> tempo;
<a name="l00105"></a>00105 
<a name="l00106"></a>00106    <a class="code" href="a00036.html#2f37b811776a0365246afbc8447a26cc">NRF_select</a>();                                   <span class="comment">// Set CSN low, init SPI tranaction</span>
<a name="l00107"></a>00107    status = <a class="code" href="a00043.html#48058f0d26bed0107d1f0141b557ad8b">spi_rw</a>(reg);                           <span class="comment">// Select register to write to and read status byte</span>
<a name="l00108"></a>00108    <span class="keywordflow">for</span>(byte_ctr=0; byte_ctr&lt;bytes; byte_ctr++)     <span class="comment">// then write all byte in buffer(*pBuf)</span>
<a name="l00109"></a>00109    {  
<a name="l00110"></a>00110      <a class="code" href="a00042.html#e4fd4823c8d5851c5c2d6b9c79313437">Spi_send_byte</a>(*pBuf++);
<a name="l00111"></a>00111      <a class="code" href="a00042.html#610afced04d118dbedcaf5e1ff0055e1">Spi_read_data</a>();
<a name="l00112"></a>00112      <span class="comment">//   spi_rw(*pBuf++);</span>
<a name="l00113"></a>00113    }
<a name="l00114"></a>00114 
<a name="l00115"></a>00115    <a class="code" href="a00036.html#73dfa5b19148628cb50a9f76849b1e81">NRF_unselect</a>();                                 <span class="comment">// Set CSN high again</span>
<a name="l00116"></a>00116    <a class="code" href="a00036.html#6b68ddb61fac015a5bc47b51ed71caca">NRF_enable</a>();
<a name="l00117"></a>00117    <span class="keywordflow">for</span>(tempo=0;tempo&lt;<a class="code" href="a00066.html#g802b2b582b121e4632aa9a491d503720">FOSC</a>/400;tempo++);     
<a name="l00118"></a>00118    <a class="code" href="a00036.html#ba5ead61ba653245bc10ee0979a9eefb">NRF_disable</a>();
<a name="l00119"></a>00119    <span class="keywordflow">return</span>(status);                                 <span class="comment">// return nRF24L01 status byte</span>
<a name="l00120"></a>00120 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="a00035_9856ea5a03c048d29e4670d94a87f51f_cgraph.png" border="0" usemap="#a00035_9856ea5a03c048d29e4670d94a87f51f_cgraph_map" alt=""></center>
<map name="a00035_9856ea5a03c048d29e4670d94a87f51f_cgraph_map">
<area href="a00043.html#48058f0d26bed0107d1f0141b557ad8b" shape="rect" coords="167,5,225,32" alt="">
</map>

<p>
Here is the caller graph for this function:<p><center><img src="a00035_9856ea5a03c048d29e4670d94a87f51f_icgraph.png" border="0" usemap="#a00035_9856ea5a03c048d29e4670d94a87f51f_icgraph_map" alt=""></center>
<map name="a00035_9856ea5a03c048d29e4670d94a87f51f_icgraph_map">
<area href="a00030.html#4529776acbd4170ce057e4fa678a1889" shape="rect" coords="167,56,308,83" alt="">
<area href="a00067.html#gec543eeacba621d36cc71eb399a084aa" shape="rect" coords="372,6,465,32" alt="">
<area href="a00067.html#gaed36c5567ef853d863244f3c8ef85ad" shape="rect" coords="357,56,480,83" alt="">
<area href="a00067.html#ge6147d552537f3b74c7251af34041a35" shape="rect" coords="372,107,465,134" alt="">
<area href="a00019.html#cca4b6216b3be1e1db321a93436d004d" shape="rect" coords="540,82,631,108" alt="">
<area href="a00019.html#d8b13fae75396c1142b12e8400bf8282" shape="rect" coords="528,6,643,32" alt="">
</map>

</div>
</div><p>
<a class="anchor" name="82238ef5299abf89313c36ac94c7ee89"></a><!-- doxytag: member="nRF_API.c::NRF_read_buf" ref="82238ef5299abf89313c36ac94c7ee89" args="(U8 reg, U8 *pBuf, U8 bytes)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> NRF_read_buf           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>reg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> *&nbsp;</td>
          <td class="paramname"> <em>pBuf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a>&nbsp;</td>
          <td class="paramname"> <em>bytes</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
NRF_read_bufReads 'bytes' of bytes from register 'reg', typically used to read RX payload, Rx/Tx address. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"></td><td valign="top"><em>'register</em>&nbsp;</td><td>'reg' to read, </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>buffer</em>&nbsp;</td><td>'*pBuf*' contains data to be stored </td></tr>
    <tr><td valign="top"></td><td valign="top"><em>bytes,:</em>&nbsp;</td><td>number of data byte to write</td></tr>
  </table>
</dl>
<dl class="return" compact><dt><b>Returns:</b></dt><dd>nRF24L01 status byte </dd></dl>

<p>
Definition at line <a class="el" href="a00104.html#l00133">133</a> of file <a class="el" href="a00104.html">nRF_API.c</a>.
<p>
References <a class="el" href="a00105.html#l00077">NRF_select</a>, <a class="el" href="a00105.html#l00078">NRF_unselect</a>, <a class="el" href="a00111.html#l00112">Spi_read_data</a>, <a class="el" href="a00112.html#l00100">spi_rw()</a>, and <a class="el" href="a00111.html#l00114">Spi_write_data</a>.
<p>
Referenced by <a class="el" href="a00098.html#l00091">hal_nrf_get_address()</a>.<div class="fragment"><pre class="fragment"><a name="l00134"></a>00134 {
<a name="l00135"></a>00135 
<a name="l00136"></a>00136    <a class="code" href="a00021.html#3cb25ca6f51f003950f9625ff05536fc">U8</a> status,byte_ctr;
<a name="l00137"></a>00137 
<a name="l00138"></a>00138    <a class="code" href="a00036.html#2f37b811776a0365246afbc8447a26cc">NRF_select</a>();                                     <span class="comment">// Set CSN low, init SPI tranaction</span>
<a name="l00139"></a>00139    status = <a class="code" href="a00043.html#48058f0d26bed0107d1f0141b557ad8b">spi_rw</a>(reg);                           <span class="comment">// Select register to write to and read status byte</span>
<a name="l00140"></a>00140 
<a name="l00141"></a>00141    <span class="keywordflow">for</span>(byte_ctr=0;byte_ctr&lt;bytes;byte_ctr++)
<a name="l00142"></a>00142    {  
<a name="l00143"></a>00143       <a class="code" href="a00042.html#adcee5c7d27976616aab3c69491ef401">Spi_write_data</a>(0);
<a name="l00144"></a>00144       pBuf[byte_ctr]=<a class="code" href="a00042.html#610afced04d118dbedcaf5e1ff0055e1">Spi_read_data</a>();
<a name="l00145"></a>00145    }
<a name="l00146"></a>00146 
<a name="l00147"></a>00147    <a class="code" href="a00036.html#73dfa5b19148628cb50a9f76849b1e81">NRF_unselect</a>();                                     <span class="comment">// Set CSN high again</span>
<a name="l00148"></a>00148    <span class="keywordflow">return</span>(status);                                 <span class="comment">// return nRF24L01 status byte</span>
<a name="l00149"></a>00149 }
</pre></div>
<p>

<p>
Here is the call graph for this function:<p><center><img src="a00035_82238ef5299abf89313c36ac94c7ee89_cgraph.png" border="0" usemap="#a00035_82238ef5299abf89313c36ac94c7ee89_cgraph_map" alt=""></center>
<map name="a00035_82238ef5299abf89313c36ac94c7ee89_cgraph_map">
<area href="a00043.html#48058f0d26bed0107d1f0141b557ad8b" shape="rect" coords="164,5,223,32" alt="">
</map>

<p>
Here is the caller graph for this function:<p><center><img src="a00035_82238ef5299abf89313c36ac94c7ee89_icgraph.png" border="0" usemap="#a00035_82238ef5299abf89313c36ac94c7ee89_icgraph_map" alt=""></center>
<map name="a00035_82238ef5299abf89313c36ac94c7ee89_icgraph_map">
<area href="a00030.html#16eb6527705c9e8c6d9144f0bcf4bcd4" shape="rect" coords="163,31,307,57" alt="">
<area href="a00067.html#gb108b5cbcc502e40c0dc587014ac3086" shape="rect" coords="355,5,477,32" alt="">
<area href="a00067.html#ge6147d552537f3b74c7251af34041a35" shape="rect" coords="369,56,463,83" alt="">
<area href="a00019.html#cca4b6216b3be1e1db321a93436d004d" shape="rect" coords="525,56,616,83" alt="">
</map>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jul 7 16:30:07 2008 for ATMEL by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.1-p1 </small></address>
</body>
</html>
